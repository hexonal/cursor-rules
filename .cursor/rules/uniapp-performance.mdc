---
description: 
globs: 
alwaysApply: false
---
# Vue3 + UniApp 性能优化规范（chat-uikit-uniapp 范例）

> 适用于所有基于 Vue3 + UniApp 的项目，参考 chat-uikit-uniapp（Vue3 版）源码实践。

## 1. 组件懒加载与按需加载
- 路由页面、重型业务组件采用异步 import() 懒加载。
- 非首屏组件、弹窗、插件等按需加载，避免全量引入。

### 正例
```ts
const MessageList = defineAsyncComponent(() => import('./MessageList.vue'));
```

## 2. 虚拟列表与大数据渲染
- 大量数据渲染（如消息列表）必须用虚拟列表方案，避免 v-for 直接渲染全部数据。
- 虚拟列表组件需支持动态高度、懒加载。

## 3. 状态管理与缓存
- 频繁变动数据用本地缓存（如 localStorage、IndexedDB、uni.setStorage）优化首屏和切换速度。
- 全局状态管理避免大对象深层响应式，拆分为小粒度模块。

## 4. 图片/资源压缩与懒加载
- 图片、视频等资源需压缩处理，优先用 webp 格式。
- 图片、长列表等需实现懒加载，避免一次性加载全部资源。

## 5. 依赖与包体积优化
- 只引入实际用到的第三方库，避免全量引入。
- 定期分析包体积，移除无用依赖和资源。

## 6. 其他规范
- 性能相关代码需有注释说明优化点。
- 复杂性能场景建议用性能分析工具（如 Chrome DevTools、uni 性能面板）辅助调优。
