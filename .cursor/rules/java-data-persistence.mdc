---
description: 
globs: 
alwaysApply: true
---
# Javaé¡¹ç›®æ•°æ®æŒä¹…åŒ–æ™ºèƒ½åŒ–è§„èŒƒ

æœ¬è§„èŒƒæä¾›æ™ºèƒ½åŒ–ã€è‡ªé€‚åº”çš„æ•°æ®æŒä¹…åŒ–è®¾è®¡æŒ‡å¯¼ï¼Œé€šè¿‡Cursorä»£ç åº“ç´¢å¼•æŠ€æœ¯ï¼ŒåŸºäºé¡¹ç›®ç°æœ‰æ•°æ®åº“è®¾è®¡å’ŒæŒä¹…åŒ–æ¨¡å¼æä¾›ä¸ªæ€§åŒ–çš„æœ€ä½³å®è·µæ–¹æ¡ˆã€‚

## ä¸€ã€æ™ºèƒ½æ•°æ®åº“è®¾è®¡åˆ†æ

### ã€é¡¹ç›®é€‚é…ã€‘è¡¨ç»“æ„è®¾è®¡æ™ºèƒ½åˆ†æ
1. **åŸºäºCursorçš„è¡¨ç»“æ„åˆ†æ**ï¼š
   ```
   æç¤ºè¯ï¼š@codebase åˆ†ææ‰€æœ‰æ•°æ®åº“å»ºè¡¨SQLå’ŒDOç±»ï¼Œæ€»ç»“é¡¹ç›®è¡¨ç»“æ„è§„èŒƒ
   åŒ…æ‹¬ï¼š
   - åŸºç¡€å­—æ®µçš„å‘½åå’Œç±»å‹è§„å¾‹ï¼ˆidã€created_atã€updated_atç­‰ï¼‰
   - ä¸»é”®è®¾è®¡ç­–ç•¥ï¼ˆè‡ªå¢ID vs UUID vs é›ªèŠ±ç®—æ³•ï¼‰
   - é€»è¾‘åˆ é™¤å­—æ®µçš„å‘½åå’Œå®ç°æ–¹å¼
   - æ—¶é—´å­—æ®µçš„ç±»å‹é€‰æ‹©ï¼ˆdatetime vs timestampï¼‰
   - å­—ç¬¦é›†å’Œæ’åºè§„åˆ™çš„ç»Ÿä¸€ä½¿ç”¨
   ```

2. **æ™ºèƒ½å­—æ®µè®¾è®¡ç­–ç•¥è¯†åˆ«**ï¼š
   ```
   æç¤ºè¯ï¼š@codebase åˆ†ææ‰€æœ‰DOç±»çš„å­—æ®µè®¾è®¡ï¼Œç¡®å®šå­—æ®µç±»å‹è§„èŒƒ
   åˆ†æå†…å®¹ï¼š
   - æ•°å€¼ç±»å‹é€‰æ‹©è§„å¾‹ï¼ˆint vs bigintï¼Œsigned vs unsignedï¼‰
   - å­—ç¬¦ä¸²ç±»å‹ä½¿ç”¨æ¨¡å¼ï¼ˆvarchar vs charï¼Œé•¿åº¦è®¾è®¡ï¼‰
   - é‡‘é¢å­—æ®µçš„ç±»å‹é€‰æ‹©ï¼ˆdecimal vs bigintå­˜å‚¨åˆ†ï¼‰
   - æšä¸¾å­—æ®µçš„å­˜å‚¨æ–¹å¼ï¼ˆtinyint vs varcharï¼‰
   - å¸ƒå°”å­—æ®µçš„è¡¨ç¤ºæ–¹æ³•ï¼ˆtinyint vs bitï¼‰
   ```

3. **æ™ºèƒ½ç´¢å¼•ç­–ç•¥åˆ†æ**ï¼š
   ```
   æç¤ºè¯ï¼š@codebase åˆ†ææ•°æ®åº“ç´¢å¼•è®¾è®¡å’ŒæŸ¥è¯¢æ¨¡å¼ï¼Œæ€»ç»“ç´¢å¼•ç­–ç•¥
   æ£€æŸ¥å†…å®¹ï¼š
   - ç´¢å¼•å‘½åè§„èŒƒï¼ˆidx_, uk_, uni_ç­‰å‰ç¼€ä½¿ç”¨ï¼‰
   - è”åˆç´¢å¼•çš„å­—æ®µé¡ºåºå’Œæœ€å·¦å‰ç¼€åŸåˆ™åº”ç”¨
   - é€»è¾‘åˆ é™¤å­—æ®µåœ¨ç´¢å¼•ä¸­çš„åŒ…å«ç­–ç•¥
   - æŸ¥è¯¢æ¡ä»¶ä¸ç´¢å¼•åŒ¹é…çš„ä¼˜åŒ–ç¨‹åº¦
   ```

### ã€é¡¹ç›®é€‚é…ã€‘æ™ºèƒ½å»ºè¡¨è¯­å¥ç”Ÿæˆ
1. **åŸºäºç°æœ‰æ¨¡å¼çš„å»ºè¡¨æ¨¡æ¿**ï¼š
   ```sql
   -- ç¬¬ä¸€æ­¥ï¼šä½¿ç”¨Cursoræ™ºèƒ½åˆ†æç°æœ‰è¡¨ç»“æ„
   -- æç¤ºè¯ï¼š@codebase åˆ†æç°æœ‰å»ºè¡¨SQLï¼Œç”Ÿæˆæ ‡å‡†å»ºè¡¨æ¨¡æ¿
   
   -- ç¬¬äºŒæ­¥ï¼šæŒ‰ç…§é¡¹ç›®ç°æœ‰æ¨¡å¼åˆ›å»ºæ–°è¡¨
   CREATE TABLE `project_new_table` (
       -- åŸºäºé¡¹ç›®ç°æœ‰ä¸»é”®è®¾è®¡ç­–ç•¥
       `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
       
       -- ä¸šåŠ¡å­—æ®µï¼ˆæ ¹æ®é¡¹ç›®å­—æ®µç±»å‹è§„å¾‹è®¾è®¡ï¼‰
       `business_field` varchar(255) NOT NULL DEFAULT '' COMMENT 'ä¸šåŠ¡å­—æ®µæè¿°',
       `amount` decimal(10,2) unsigned NOT NULL DEFAULT '0.00' COMMENT 'é‡‘é¢å­—æ®µ',
       `status` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'çŠ¶æ€ï¼š0-æ­£å¸¸ 1-ç¦ç”¨',
       
       -- åŸºäºé¡¹ç›®ç°æœ‰çš„åŸºç¡€å­—æ®µæ¨¡å¼
       `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
       `created_by` varchar(100) NOT NULL DEFAULT '' COMMENT 'åˆ›å»ºäºº',
       `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
       `updated_by` varchar(100) NOT NULL DEFAULT '' COMMENT 'æ›´æ–°äºº',
       `deleted` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'åˆ é™¤çŠ¶æ€ï¼š0-æœªåˆ é™¤ 1-å·²åˆ é™¤',
       
       PRIMARY KEY (`id`),
       -- åŸºäºé¡¹ç›®ç´¢å¼•å‘½åå’Œè®¾è®¡è§„å¾‹
       KEY `idx_business_field_deleted` (`business_field`, `deleted`),
       KEY `idx_status_created_at` (`status`, `created_at`)
   ) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=DYNAMIC COMMENT='æ–°ä¸šåŠ¡è¡¨';
   ```

2. **æ™ºèƒ½ç´¢å¼•è®¾è®¡æ¨è**ï¼š
   ```
   æç¤ºè¯ï¼š@codebase åŸºäºç°æœ‰æŸ¥è¯¢æ¨¡å¼å’ŒRepositoryæ–¹æ³•ï¼Œä¸ºæ–°è¡¨æ¨èæœ€ä¼˜ç´¢å¼•è®¾è®¡
   åˆ†æç»´åº¦ï¼š
   - å¸¸ç”¨æŸ¥è¯¢æ¡ä»¶çš„ç»„åˆæ¨¡å¼
   - æ’åºå­—æ®µçš„ç´¢å¼•éœ€æ±‚
   - åˆ†é¡µæŸ¥è¯¢çš„ä¼˜åŒ–ç­–ç•¥
   - é€»è¾‘åˆ é™¤å­—æ®µçš„ç´¢å¼•åŒ…å«ç­–ç•¥
   ```

## äºŒã€æ™ºèƒ½MyBatisé…ç½®åˆ†æ

### ã€é¡¹ç›®é€‚é…ã€‘Mapperæ¥å£æ™ºèƒ½åˆ†æ
1. **åŸºäºCursorçš„Mapperæ¨¡å¼åˆ†æ**ï¼š
   ```
   æç¤ºè¯ï¼š@codebase åˆ†ææ‰€æœ‰Mapperæ¥å£ï¼Œæ€»ç»“é¡¹ç›®æ•°æ®è®¿é—®å±‚è§„èŒƒ
   åˆ†æå†…å®¹ï¼š
   - Mapperæ¥å£çš„å‘½åå’ŒåŒ…ç»„ç»‡æ–¹å¼
   - BaseMapperçš„ç»§æ‰¿ä½¿ç”¨æƒ…å†µï¼ˆMyBatis-Plusï¼‰
   - è‡ªå®šä¹‰æŸ¥è¯¢æ–¹æ³•çš„å‘½åè§„å¾‹
   - @Paramæ³¨è§£çš„ä½¿ç”¨æ¨¡å¼
   - åˆ†é¡µæŸ¥è¯¢çš„å®ç°æ–¹å¼
   ```

2. **æ™ºèƒ½Mapperæ¥å£ç”Ÿæˆ**ï¼š
   ```java
   // ç¬¬ä¸€æ­¥ï¼šåˆ†æç°æœ‰Mapperæ¨¡å¼
   // æç¤ºè¯ï¼š@codebase åˆ†æé¡¹ç›®Mapperæ¥å£çš„æ ‡å‡†ç»“æ„å’Œç»§æ‰¿å…³ç³»
   
   // ç¬¬äºŒæ­¥ï¼šæŒ‰ç…§é¡¹ç›®ç°æœ‰æ¨¡å¼å®ç°Mapper
   @Mapper
   public interface UserMapper extends BaseMapper<UserDO> {
       
       // åŸºäºé¡¹ç›®ç°æœ‰çš„å‘½åè§„å¾‹å’Œå‚æ•°ä¼ é€’æ–¹å¼
       List<UserDO> selectByConditionWithPage(@Param("condition") UserQueryCondition condition,
                                               @Param("offset") int offset,
                                               @Param("limit") int limit);
       
       // æ ¹æ®é¡¹ç›®é€»è¾‘åˆ é™¤ç­–ç•¥
       int updateDeletedById(@Param("id") Long id, @Param("updatedBy") String updatedBy);
       
       // æŒ‰ç…§é¡¹ç›®ç»Ÿè®¡æŸ¥è¯¢æ¨¡å¼
       long countByCondition(@Param("condition") UserQueryCondition condition);
   }
   ```

### ã€é¡¹ç›®é€‚é…ã€‘XMLé…ç½®æ™ºèƒ½åˆ†æ
1. **åŸºäºCursorçš„XMLæ¨¡å¼åˆ†æ**ï¼š
   ```
   æç¤ºè¯ï¼š@codebase åˆ†ææ‰€æœ‰Mapper.xmlæ–‡ä»¶ï¼Œæ€»ç»“XMLé…ç½®è§„èŒƒ
   æ£€æŸ¥å†…å®¹ï¼š
   - namespaceé…ç½®å’ŒåŒ…è·¯å¾„å¯¹åº”å…³ç³»
   - resultMapçš„ä½¿ç”¨æ¨¡å¼å’Œå­—æ®µæ˜ å°„è§„å¾‹
   - SQLè¯­å¥çš„æ³¨é‡Šå’Œæ ¼å¼è§„èŒƒ
   - åŠ¨æ€SQLçš„ä½¿ç”¨æ¨¡å¼ï¼ˆ<if>ã€<foreach>ç­‰ï¼‰
   - å‚æ•°ä¼ é€’å’Œç»“æœæ˜ å°„çš„æ ‡å‡†åšæ³•
   ```

2. **æ™ºèƒ½XMLé…ç½®ç”Ÿæˆ**ï¼š
   ```xml
   <!-- åŸºäºé¡¹ç›®ç°æœ‰XMLç»“æ„æ¨¡å¼ -->
   <?xml version="1.0" encoding="UTF-8"?>
   <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
           "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
   <mapper namespace="com.project.dao.mapper.UserMapper">
       
       <!-- åŸºäºé¡¹ç›®ç°æœ‰resultMapå‘½åå’Œå­—æ®µæ˜ å°„è§„å¾‹ -->
       <resultMap id="BaseResultMap" type="com.project.dao.entity.UserDO">
           <id column="id" property="id" jdbcType="BIGINT"/>
           <result column="user_name" property="userName" jdbcType="VARCHAR"/>
           <result column="created_at" property="createdAt" jdbcType="TIMESTAMP"/>
           <result column="deleted" property="deleted" jdbcType="TINYINT"/>
       </resultMap>
       
       <!-- æŒ‰ç…§é¡¹ç›®SQLæ³¨é‡Šå’Œæ ¼å¼è§„èŒƒ -->
       <!-- æ ¹æ®æ¡ä»¶åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ -->
       <!-- Author: AI Generated Based on Project Pattern -->
       <select id="selectByConditionWithPage" resultMap="BaseResultMap">
           SELECT id, user_name, email, status, created_at, updated_at
           FROM user
           <where>
               deleted = 0
               <if test="condition.userName != null and condition.userName != ''">
                   AND user_name LIKE CONCAT('%', #{condition.userName}, '%')
               </if>
               <if test="condition.status != null">
                   AND status = #{condition.status}
               </if>
           </where>
           ORDER BY created_at DESC
           LIMIT #{offset}, #{limit}
       </select>
   </mapper>
   ```

## ä¸‰ã€æ™ºèƒ½æ•°æ®è®¿é—®å±‚è®¾è®¡

### ã€é¡¹ç›®é€‚é…ã€‘DOå®ä½“ç±»æ™ºèƒ½åˆ†æ
1. **åŸºäºCursorçš„DOç±»è®¾è®¡åˆ†æ**ï¼š
   ```
   æç¤ºè¯ï¼š@codebase åˆ†ææ‰€æœ‰DOç±»ï¼Œæ€»ç»“å®ä½“ç±»è®¾è®¡è§„èŒƒ
   åˆ†æå†…å®¹ï¼š
   - DOç±»çš„å‘½åå’ŒåŒ…ç»„ç»‡æ–¹å¼
   - åŸºç¡€å­—æ®µçš„æ³¨è§£ä½¿ç”¨ï¼ˆ@TableIdã€@TableFieldç­‰ï¼‰
   - å­—æ®µç±»å‹å’Œæ•°æ®åº“ç±»å‹çš„æ˜ å°„å…³ç³»
   - é€»è¾‘åˆ é™¤æ³¨è§£çš„ä½¿ç”¨æ¨¡å¼
   - è‡ªåŠ¨å¡«å……æ³¨è§£çš„é…ç½®æ–¹å¼
   ```

2. **æ™ºèƒ½DOç±»ç”Ÿæˆ**ï¼š
   ```java
   // åŸºäºé¡¹ç›®ç°æœ‰DOç±»è®¾è®¡æ¨¡å¼
   @Data
   @TableName("user")
   @EqualsAndHashCode(callSuper = false)
   public class UserDO implements Serializable {
       
       private static final long serialVersionUID = 1L;
       
       // åŸºäºé¡¹ç›®ä¸»é”®æ³¨è§£ä½¿ç”¨æ¨¡å¼
       @TableId(value = "id", type = IdType.AUTO)
       private Long id;
       
       // æŒ‰ç…§é¡¹ç›®å­—æ®µæ˜ å°„å’Œæ ¡éªŒæ³¨è§£è§„å¾‹
       @TableField("user_name")
       @NotBlank(message = "ç”¨æˆ·åä¸èƒ½ä¸ºç©º")
       private String userName;
       
       @TableField("email")
       @Email(message = "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®")
       private String email;
       
       // åŸºäºé¡¹ç›®åŸºç¡€å­—æ®µçš„æ³¨è§£æ¨¡å¼
       @TableField(value = "created_at", fill = FieldFill.INSERT)
       private LocalDateTime createdAt;
       
       @TableField(value = "created_by", fill = FieldFill.INSERT)
       private String createdBy;
       
       @TableField(value = "updated_at", fill = FieldFill.INSERT_UPDATE)
       private LocalDateTime updatedAt;
       
       @TableField(value = "updated_by", fill = FieldFill.INSERT_UPDATE)
       private String updatedBy;
       
       // æŒ‰ç…§é¡¹ç›®é€»è¾‘åˆ é™¤é…ç½®
       @TableLogic
       @TableField("deleted")
       private Integer deleted;
   }
   ```

### ã€é¡¹ç›®é€‚é…ã€‘Repositoryå±‚æ™ºèƒ½è®¾è®¡
1. **åŸºäºCursorçš„Repositoryæ¨¡å¼åˆ†æ**ï¼š
   ```
   æç¤ºè¯ï¼š@codebase åˆ†æRepositoryæ¥å£å’Œå®ç°ç±»ï¼Œæ€»ç»“æ•°æ®è®¿é—®å±‚è®¾è®¡
   æ£€æŸ¥å†…å®¹ï¼š
   - Repositoryæ¥å£çš„å‘½åå’Œæ–¹æ³•ç­¾åè§„å¾‹
   - DOä¸Entityä¹‹é—´çš„è½¬æ¢æ¨¡å¼
   - åˆ†é¡µæŸ¥è¯¢çš„å°è£…æ–¹å¼
   - äº‹åŠ¡å¤„ç†çš„æ³¨è§£ä½¿ç”¨
   - å¼‚å¸¸å¤„ç†å’Œé”™è¯¯ç è½¬æ¢
   ```

2. **æ™ºèƒ½Repositoryå®ç°**ï¼š
   ```java
   // åŸºäºé¡¹ç›®ç°æœ‰Repositoryæ¨¡å¼
   @Repository
   @RequiredArgsConstructor
   @Slf4j
   public class UserRepositoryImpl implements UserRepository {
       
       private final UserMapper userMapper;
       
       @Override
       public Optional<User> findById(Long id) {
           UserDO userDO = userMapper.selectById(id);
           return Optional.ofNullable(userDO).map(this::convertToEntity);
       }
       
       @Override
       public Page<User> findByCondition(UserQueryCondition condition, Pageable pageable) {
           // æŒ‰ç…§é¡¹ç›®åˆ†é¡µæŸ¥è¯¢æ¨¡å¼
           int offset = (int) pageable.getOffset();
           int limit = pageable.getPageSize();
           
           List<UserDO> userDOs = userMapper.selectByConditionWithPage(condition, offset, limit);
           long total = userMapper.countByCondition(condition);
           
           List<User> users = userDOs.stream()
                   .map(this::convertToEntity)
                   .collect(Collectors.toList());
           
           return new PageImpl<>(users, pageable, total);
       }
       
       // åŸºäºé¡¹ç›®ç°æœ‰çš„DOä¸Entityè½¬æ¢æ¨¡å¼
       private User convertToEntity(UserDO userDO) {
           // ä½¿ç”¨é¡¹ç›®ç°æœ‰çš„è½¬æ¢æ–¹å¼ï¼ˆBeanUtils.copyProperties æˆ– MapStructç­‰ï¼‰
           return BeanUtils.copyProperties(userDO, User.class);
       }
   }
   ```

## å››ã€æ™ºèƒ½æ€§èƒ½ä¼˜åŒ–åˆ†æ

### ã€é¡¹ç›®é€‚é…ã€‘æŸ¥è¯¢æ€§èƒ½æ™ºèƒ½åˆ†æ
1. **åŸºäºCursorçš„æŸ¥è¯¢æ¨¡å¼åˆ†æ**ï¼š
   ```
   æç¤ºè¯ï¼š@codebase åˆ†ææ‰€æœ‰SQLæŸ¥è¯¢ï¼Œè¯†åˆ«æ€§èƒ½ä¼˜åŒ–æœºä¼š
   åˆ†æå†…å®¹ï¼š
   - æ…¢æŸ¥è¯¢å’ŒN+1æŸ¥è¯¢é—®é¢˜è¯†åˆ«
   - åˆ†é¡µæŸ¥è¯¢çš„æ·±åˆ†é¡µé—®é¢˜
   - å…¨è¡¨æ‰«æå’Œç´¢å¼•å¤±æ•ˆæƒ…å†µ
   - å¤§ç»“æœé›†æŸ¥è¯¢çš„ä¼˜åŒ–ç­–ç•¥
   ```

2. **æ™ºèƒ½æŸ¥è¯¢ä¼˜åŒ–å»ºè®®**ï¼š
   ```
   æç¤ºè¯ï¼š@codebase åŸºäºç°æœ‰æŸ¥è¯¢æ¨¡å¼ï¼Œç”Ÿæˆæ€§èƒ½ä¼˜åŒ–å»ºè®®
   ä¼˜åŒ–ç»´åº¦ï¼š
   - ç´¢å¼•è®¾è®¡ä¼˜åŒ–
   - SQLè¯­å¥é‡å†™
   - åˆ†é¡µç­–ç•¥æ”¹è¿›
   - ç¼“å­˜ç­–ç•¥å¼•å…¥
   ```

### ã€é¡¹ç›®é€‚é…ã€‘è¿æ¥æ± é…ç½®æ™ºèƒ½åˆ†æ
1. **åŸºäºCursorçš„è¿æ¥æ± é…ç½®åˆ†æ**ï¼š
   ```
   æç¤ºè¯ï¼š@codebase åˆ†æapplication.ymlä¸­çš„æ•°æ®æºé…ç½®ï¼Œä¼˜åŒ–è¿æ¥æ± å‚æ•°
   åˆ†æå†…å®¹ï¼š
   - å½“å‰è¿æ¥æ± ç±»å‹å’Œå‚æ•°é…ç½®
   - è¿æ¥æ•°é…ç½®ä¸ä¸šåŠ¡è´Ÿè½½çš„åŒ¹é…åº¦
   - è¿æ¥æ³„æ¼ç›‘æ§å’Œé¢„é˜²æœºåˆ¶
   - å¤šæ•°æ®æºé…ç½®çš„ç®¡ç†æ–¹å¼
   ```

2. **æ™ºèƒ½è¿æ¥æ± é…ç½®ç”Ÿæˆ**ï¼š
   ```yaml
   # åŸºäºé¡¹ç›®ç°æœ‰é…ç½®æ¨¡å¼ä¼˜åŒ–
   spring:
     datasource:
       type: com.alibaba.druid.pool.DruidDataSource
       druid:
         # æ ¹æ®é¡¹ç›®è´Ÿè½½æ™ºèƒ½æ¨èå‚æ•°
         initial-size: 5
         min-idle: 5
         max-active: 20
         max-wait: 60000
         time-between-eviction-runs-millis: 60000
         min-evictable-idle-time-millis: 300000
         validation-query: SELECT 1
         test-while-idle: true
         test-on-borrow: false
         test-on-return: false
         pool-prepared-statements: true
         max-pool-prepared-statement-per-connection-size: 20
         filters: stat,wall,slf4j
         # åŸºäºé¡¹ç›®ç›‘æ§éœ€æ±‚é…ç½®
         web-stat-filter:
           enabled: true
         stat-view-servlet:
           enabled: true
   ```

## äº”ã€Cursoræ™ºèƒ½è¾…åŠ©æ•°æ®æŒä¹…åŒ–å¼€å‘

### ã€æ¨èã€‘åŸºäº@codebaseçš„æ™ºèƒ½ä»£ç ç”Ÿæˆ
1. **å®Œæ•´æ•°æ®è®¿é—®å±‚ç”Ÿæˆ**ï¼š
   ```
   æç¤ºè¯æ¨¡æ¿ï¼š
   @codebase åŸºäºç°æœ‰æ•°æ®æŒä¹…åŒ–æ¨¡å¼ï¼Œä¸º [æ–°ä¸šåŠ¡è¡¨] ç”Ÿæˆå®Œæ•´çš„æ•°æ®è®¿é—®å±‚ä»£ç ï¼ŒåŒ…æ‹¬ï¼š
   1. æ•°æ®åº“å»ºè¡¨SQL
   2. DOå®ä½“ç±»å®šä¹‰
   3. Mapperæ¥å£å’ŒXMLé…ç½®
   4. Repositoryæ¥å£å’Œå®ç°
   
   è¦æ±‚éµå¾ªé¡¹ç›®ç°æœ‰çš„ï¼š
   - è¡¨ç»“æ„å’Œå­—æ®µè®¾è®¡è§„èŒƒ
   - æ³¨è§£å’Œé…ç½®ä½¿ç”¨æ¨¡å¼
   - å‘½åå’ŒåŒ…ç»„ç»‡æ–¹å¼
   - æ€§èƒ½ä¼˜åŒ–ç­–ç•¥
   ```

2. **æ•°æ®è®¿é—®å±‚è§„èŒƒæ£€æŸ¥**ï¼š
   ```
   æç¤ºè¯æ¨¡æ¿ï¼š
   @codebase æ£€æŸ¥è¿™ä¸ªæ•°æ®è®¿é—®å±‚å®ç°æ˜¯å¦ç¬¦åˆé¡¹ç›®è§„èŒƒï¼š
   1. è¡¨ç»“æ„è®¾è®¡æ˜¯å¦åˆç†
   2. ç´¢å¼•é…ç½®æ˜¯å¦ä¼˜åŒ–
   3. Mapperæ–¹æ³•æ˜¯å¦ç¬¦åˆå‘½åè§„èŒƒ
   4. SQLè¯­å¥æ˜¯å¦å­˜åœ¨æ€§èƒ½é—®é¢˜
   
   [ç²˜è´´éœ€è¦æ£€æŸ¥çš„ä»£ç ]
   ```

### ã€æ¨èã€‘åŸºäº@codebaseçš„æ€§èƒ½è¯Šæ–­
1. **SQLæ€§èƒ½é—®é¢˜åˆ†æ**ï¼š
   ```
   æç¤ºè¯æ¨¡æ¿ï¼š
   @codebase åˆ†æè¿™ä¸ªSQLæŸ¥è¯¢çš„æ€§èƒ½é—®é¢˜ï¼ŒåŸºäºé¡¹ç›®ç°æœ‰ä¼˜åŒ–ç­–ç•¥ï¼š
   [ç²˜è´´SQLè¯­å¥æˆ–æ…¢æŸ¥è¯¢æ—¥å¿—]
   
   è¯·æ£€æŸ¥ï¼š
   1. ç´¢å¼•ä½¿ç”¨æ˜¯å¦åˆç†
   2. æŸ¥è¯¢æ¡ä»¶æ˜¯å¦ä¼˜åŒ–
   3. è¿”å›å­—æ®µæ˜¯å¦å¿…è¦
   4. æ˜¯å¦å­˜åœ¨N+1æŸ¥è¯¢é—®é¢˜
   ```

2. **æ•°æ®åº“è®¾è®¡ä¼˜åŒ–å»ºè®®**ï¼š
   ```
   æç¤ºè¯æ¨¡æ¿ï¼š
   @codebase åŸºäºé¡¹ç›®ç°æœ‰è¡¨ç»“æ„ï¼Œä¸ºæ•°æ®åº“è®¾è®¡æä¾›ä¼˜åŒ–å»ºè®®ï¼š
   [æè¿°ä¸šåŠ¡åœºæ™¯æˆ–ç²˜è´´è¡¨ç»“æ„]
   
   åˆ†æç»´åº¦ï¼š
   1. è¡¨ç»“æ„è®¾è®¡åˆç†æ€§
   2. ç´¢å¼•ç­–ç•¥ä¼˜åŒ–
   3. åˆ†åº“åˆ†è¡¨éœ€æ±‚è¯„ä¼°
   4. æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–
   ```

## å…­ã€æ™ºèƒ½æ•°æ®è¿ç§»ä¸ç‰ˆæœ¬æ§åˆ¶

### ã€é¡¹ç›®é€‚é…ã€‘æ•°æ®åº“ç‰ˆæœ¬ç®¡ç†åˆ†æ
1. **åŸºäºCursorçš„è¿ç§»è„šæœ¬åˆ†æ**ï¼š
   ```
   æç¤ºè¯ï¼š@codebase åˆ†ææ•°æ®åº“è¿ç§»è„šæœ¬ï¼Œæ€»ç»“ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥
   æ£€æŸ¥å†…å®¹ï¼š
   - è¿ç§»è„šæœ¬çš„å‘½åå’Œç»„ç»‡æ–¹å¼
   - DDLå’ŒDMLå˜æ›´çš„ç®¡ç†ç­–ç•¥
   - å›æ»šè„šæœ¬çš„ç¼–å†™è§„èŒƒ
   - ç¯å¢ƒé—´æ•°æ®åŒæ­¥æœºåˆ¶
   ```

2. **æ™ºèƒ½è¿ç§»è„šæœ¬ç”Ÿæˆ**ï¼š
   ```sql
   -- åŸºäºé¡¹ç›®ç°æœ‰è¿ç§»è„šæœ¬æ¨¡å¼
   -- Migration: V1.0.1__Add_User_Profile_Table.sql
   -- Author: AI Generated Based on Project Pattern
   -- Date: 2024-01-01
   -- Description: æ·»åŠ ç”¨æˆ·æ¡£æ¡ˆè¡¨ï¼Œæ”¯æŒç”¨æˆ·è¯¦ç»†ä¿¡æ¯å­˜å‚¨
   
   -- åˆ›å»ºè¡¨
   CREATE TABLE `user_profile` (
       `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
       `user_id` bigint(20) unsigned NOT NULL COMMENT 'ç”¨æˆ·ID',
       `nickname` varchar(50) NOT NULL DEFAULT '' COMMENT 'æ˜µç§°',
       `avatar_url` varchar(255) NOT NULL DEFAULT '' COMMENT 'å¤´åƒURL',
       `birthday` date DEFAULT NULL COMMENT 'ç”Ÿæ—¥',
       `gender` tinyint unsigned NOT NULL DEFAULT '0' COMMENT 'æ€§åˆ«ï¼š0-æœªçŸ¥ 1-ç”· 2-å¥³',
       
       `created_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
       `created_by` varchar(100) NOT NULL DEFAULT '' COMMENT 'åˆ›å»ºäºº',
       `updated_at` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
       `updated_by` varchar(100) NOT NULL DEFAULT '' COMMENT 'æ›´æ–°äºº',
       `deleted` tinyint(1) NOT NULL DEFAULT '0' COMMENT 'åˆ é™¤çŠ¶æ€ï¼š0-æœªåˆ é™¤ 1-å·²åˆ é™¤',
       
       PRIMARY KEY (`id`),
       UNIQUE KEY `uk_user_id_deleted` (`user_id`, `deleted`),
       KEY `idx_nickname_deleted` (`nickname`, `deleted`)
   ) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci ROW_FORMAT=DYNAMIC COMMENT='ç”¨æˆ·æ¡£æ¡ˆè¡¨';
   
   -- æ·»åŠ å¤–é”®çº¦æŸï¼ˆå¦‚æœé¡¹ç›®ä½¿ç”¨ï¼‰
   -- ALTER TABLE `user_profile` ADD CONSTRAINT `fk_user_profile_user_id` 
   --     FOREIGN KEY (`user_id`) REFERENCES `user` (`id`) ON DELETE CASCADE;
   ```

## ä¸ƒã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### ã€FAQã€‘åŸºäºCursorçš„é—®é¢˜è§£å†³
1. **æ•°æ®æŒä¹…åŒ–é—®é¢˜è¯Šæ–­**ï¼š
   ```
   æç¤ºè¯æ¨¡æ¿ï¼š
   @codebase åˆ†æè¿™ä¸ªæ•°æ®æŒä¹…åŒ–é—®é¢˜ï¼ŒåŸºäºé¡¹ç›®ç°æœ‰å®ç°æä¾›è§£å†³æ–¹æ¡ˆï¼š
   [ç²˜è´´å¼‚å¸¸æ—¥å¿—å’Œç›¸å…³ä»£ç ]
   
   è¯·æ£€æŸ¥ï¼š
   1. SQLè¯­å¥æ˜¯å¦æ­£ç¡®
   2. å­—æ®µæ˜ å°„æ˜¯å¦åŒ¹é…
   3. äº‹åŠ¡é…ç½®æ˜¯å¦åˆç†
   4. è¿æ¥æ± é…ç½®æ˜¯å¦æ­£å¸¸
   ```

2. **æ€§èƒ½é—®é¢˜æ’æŸ¥**ï¼š
   ```
   æç¤ºè¯æ¨¡æ¿ï¼š
   @codebase åˆ†æè¿™ä¸ªæ•°æ®åº“æ€§èƒ½é—®é¢˜ï¼Œå¯¹æ¯”é¡¹ç›®ä¸­çš„é«˜æ•ˆå®ç°ï¼š
   [æè¿°æ€§èƒ½é—®é¢˜å’Œç›¸å…³æŸ¥è¯¢]
   
   åˆ†æç»´åº¦ï¼š
   1. ç´¢å¼•ä½¿ç”¨æ•ˆç‡
   2. æŸ¥è¯¢è¯­å¥ä¼˜åŒ–
   3. åˆ†é¡µç­–ç•¥æ”¹è¿›
   4. ç¼“å­˜ç­–ç•¥åº”ç”¨
   ```

---

## å…«ã€æ™ºèƒ½åŒ–è§„èŒƒé›†æˆ

### ã€é‡è¦ã€‘ä¸å…¶ä»–è§„èŒƒçš„æ™ºèƒ½ååŒ
1. **é¢†åŸŸå®ä½“é›†æˆ**ï¼š
   ```
   æç¤ºè¯ï¼š@codebase åŸºäº @java-code-development-and-quality.mdc ä¸­çš„DDDè§„èŒƒï¼Œä¼˜åŒ–DOä¸Entityä¹‹é—´çš„è½¬æ¢
   ```

2. **å¼‚å¸¸å¤„ç†é›†æˆ**ï¼š
   ```
   æç¤ºè¯ï¼š@codebase åŸºäº @java-error-handling-and-operations.mdc è§„èŒƒï¼Œç¡®ä¿æ•°æ®è®¿é—®å±‚å¼‚å¸¸å¤„ç†çš„è§„èŒƒæ€§
   ```

3. **é¡¹ç›®æ¶æ„é›†æˆ**ï¼š
   ```
   æç¤ºè¯ï¼š@codebase åŸºäº @java-project-architecture-and-structure.mdc è§„èŒƒï¼Œç¡®ä¿æ•°æ®è®¿é—®å±‚æ¨¡å—åˆ’åˆ†çš„åˆç†æ€§
   ```

### ã€æ ¸å¿ƒä»·å€¼ã€‘æ™ºèƒ½åŒ–å¸¦æ¥çš„æ•ˆæœ
- **ğŸ¯ ç²¾å‡†é€‚é…**ï¼šAIç†è§£é¡¹ç›®æ•°æ®æŒä¹…åŒ–æ¨¡å¼ï¼Œç”Ÿæˆå®Œå…¨ç¬¦åˆé¡¹ç›®é£æ ¼çš„ä»£ç 
- **âš¡ æ•ˆç‡æå‡**ï¼šä»æ‰‹å·¥è®¾è®¡åˆ°AIæ™ºèƒ½ç”Ÿæˆï¼Œæ•°æ®è®¿é—®å±‚å¼€å‘æ•ˆç‡æå‡10å€
- **ğŸ›¡ï¸ è´¨é‡ä¿è¯**ï¼šAIæ£€æŸ¥ç¡®ä¿æ•°æ®åº“è®¾è®¡å’ŒæŸ¥è¯¢æ€§èƒ½çš„æœ€ä¼˜åŒ–
- **ğŸ“š çŸ¥è¯†ä¼ æ‰¿**ï¼šé¡¹ç›®æ•°æ®åº“è®¾è®¡ç»éªŒé€šè¿‡AIè§„èŒƒåŒ–ä¼ é€’ç»™å›¢é˜Ÿæˆå‘˜
- **ğŸ” æ€§èƒ½ä¼˜åŒ–**ï¼šæ™ºèƒ½è¯†åˆ«æ€§èƒ½ç“¶é¢ˆï¼Œæä¾›é’ˆå¯¹æ€§çš„ä¼˜åŒ–å»ºè®®